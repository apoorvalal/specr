---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%",
  fig.retina = 2
)
```


<div style = "padding-top:1em; padding-bottom: 0.5em;">
<img src="man/figures/specr_logo.png" width = 135 align="right" />
</div>


# specr - Statistical Functions for Specification Curve Analyses

<!-- badges: start -->
[![Lifecycle: experimental](https://img.shields.io/badge/lifecycle-experimental-orange.svg)](https://www.tidyverse.org/lifecycle/#experimental)
[![CRAN status](https://www.r-pkg.org/badges/version/specr)](https://CRAN.R-project.org/package=specr)
<!-- badges: end -->

## Overview

The goal of specr is to facilitate specification curve analyses as described by Simonson, Simmons & Nelson (2019). It can be used to investigate how different (e.g., theoretical defensible) analytical choices affect outcome statistics within the universe of one single data set. 

It provides functions to setup, run, evaluate, and plot the multiverse of specifications. A simple usage example is provided below. For more information about the various functions and specific use cases, visit the documentation at https://masurp.github.io/specr/index.html. 


## Disclaimer

We do see a lot of value in investigating how analytical choices affect a statistical outcome of interest. However, we strongly caution against using `specr` as a tool to somehow arrive at a better estimate. Running a specification curve analysis does not make your findings any more reliable, valid or generalizable than a single analyis. The method is only meant to inform about the effects of analytical choices on results, and not a better way to estimate a correlation or effect.

## Installation

You can install the development version from [GitHub](https://github.com/) with:

``` r
# install.packages("devtools")
devtools::install_github("masurp/specr")
```

## A Simple Usage Example

This is a basic example of how to use the major functions in this package. In a first step, check the data (here a simulated data set that is provided within the package).

```{r, message=F, warning = F}
library(specr)
head(example_data)
```

In a second step, use the function `run_specs()` and include your analytical choices as arguments. The resulting data frame includes relevant statistics of all models that were estimated.

```{r, message=F, warning = F}
results <- run_specs(df = example_data, 
                     y = c("y1", "y2"), 
                     x = c("x1", "x2"), 
                     model = c("lm"), 
                     controls = c("c1", "c2"), 
                     subsets = list(group1 = unique(example_data$group1),
                                   group2 = unique(example_data$group2)))
head(results)
```

Use the function `summarise_specs()` to get a first summary of your results (you can specify what type of statistics should be computed as well as what grouping factors should be used).

```{r, message=F, warning = F}
summarise_specs(results, 
                stats = lst(median, min, max), 
                group = c("x", "y"))
```

Use the function `plot_specs()` to produce a typical visualization of the specification curve and how the analytical choices affected the obtained results. 

```{r, fig.height=10, fig.width=10, message=F, warning = F}
# Plot specification curve analysis
plot_specs(results, choices = c("x", "y", "controls", "subsets"))
```

For a more comprehensive example, check out the page "Getting started". For specific uses and additional functions, have a look at the vignettes.


## How to cite this package

Developing and maintaining open source software is an important yet often underappreciated contribution to scientific progress. Thus, whenever you are using open source software (or software in general), please make sure to cite it appropriately so that developers get credit for their work.

When using `specr`, please cite it as follows:

```{r}
citation("specr")
```

## References

Simonsohn, U., Simmons, J. P., & Nelson, L. D. (2019). Specification Curve: Descriptive and Inferential Statistics for all Plausible Specifications Available at: http://urisohn.com/sohn_files/wp/wordpress/wp-content/uploads/Paper-Specification-curve-2019-11-16.pdf
